#!/bin/bash

export DATA_ROOT=${DATA_ROOT:="$(pwd)/data/$FULCRUM_ORG"}

mkdir -p "$DATA_ROOT"

docker run \
  -e FULCRUM_ORG \
  -e FULCRUM_TOKEN \
  -e FULCRUM_GPKG_ENABLED \
  -e FULCRUM_REPORTS_ENABLED \
  -e FULCRUM_MEDIA_ENABLED \
  -e FULCRUM_S3_SYNC_ENABLED \
  -e FULCRUM_SYNC_ARGS \
  -e FULCRUM_REPORTS_ARGS \
  -e FULCRUM_MEDIA_ARGS \
  -e FULCRUM_GPKG_ARGS \
  -e FULCRUM_PG_ARGS \
  -e FULCRUM_PG_ENABLED \
  -e FULCRUM_PG_HOST \
  -e FULCRUM_PG_PORT \
  -e FULCRUM_PG_DATABASE \
  -e FULCRUM_PG_USER \
  -e FULCRUM_PG_PASSWORD \
  -e FULCRUM_MS_ARGS \
  -e FULCRUM_MS_ENABLED \
  -e FULCRUM_MS_CONNECTION_STRING \
  -e FULCRUM_MS_HOST \
  -e FULCRUM_MS_PORT \
  -e FULCRUM_MS_DATABASE \
  -e FULCRUM_MS_USER \
  -e FULCRUM_MS_PASSWORD \
  -e FULCRUM_AWS_ACCESS_KEY_ID \
  -e FULCRUM_AWS_SECRET_ACCESS_KEY \
  -e FULCRUM_S3_SYNC_BUCKET \
  --rm \
  -v "$DATA_ROOT":/data \
  -it fulcrumapp/sync $@
